# Mattermost Azure Kubernetes Configuration
# This is an example configuration file with placeholder passwords
# Run: make env (to create .env with secure generated passwords)

# Azure Configuration
RESOURCE_GROUP=mattermost-test-rg
CLUSTER_NAME=mattermost-test-aks
LOCATION=eastus2

# AKS Cluster Configuration
NODE_COUNT=3
NODE_VM_SIZE=Standard_D4s_v4

# PostgreSQL Configuration
POSTGRES_SERVER=mattermost-postgres
POSTGRES_DB=mattermost
POSTGRES_ADMIN_USER=mmuser
POSTGRES_PASSWORD=CHANGE_ME_USE_GENERATE_SECRETS_SCRIPT
POSTGRES_TIER=MemoryOptimized
POSTGRES_SKU=Standard_E2ds_v4
POSTGRES_STORAGE_SIZE=128
POSTGRES_VERSION=18
POSTGRES_PUBLIC_ACCESS=0.0.0.0

# MinIO Configuration
MINIO_OPERATOR_VERSION=v7.1.1
MINIO_IMAGE=cgr.dev/chainguard/minio:latest
MINIO_ADMIN_USER=admin
MINIO_ADMIN_PASSWORD=CHANGE_ME_USE_GENERATE_SECRETS_SCRIPT
MINIO_SERVICE_USER=mattermost
MINIO_SERVICE_PASSWORD=CHANGE_ME_USE_GENERATE_SECRETS_SCRIPT

# s3proxy Configuration (only needed for s3proxy deployment)
S3PROXY_PASSWORD=CHANGE_ME_USE_GENERATE_SECRETS_SCRIPT

# cert-manager Configuration
CERT_MANAGER_VERSION=v1.19.2

# Gateway Configuration
DOMAIN=mattermost.example.com
EMAIL=admin@example.com
DNS_SERVER=8.8.8.8

# Mattermost Configuration
MATTERMOST_VERSION=11.2.1
MATTERMOST_SIZE=1000users
MM_SERVICEENVIRONMENT=production

# Mattermost S3 Storage Settings (for MinIO and s3proxy deployments)
# These settings control encryption and security for S3-compatible storage
MM_FILESETTINGS_AMAZONS3SSL=false        # Use HTTP for in-cluster communication (MinIO has no TLS configured)
MM_FILESETTINGS_AMAZONS3SSE=true         # Enable server-side encryption (encrypts data at rest)
MM_FILESETTINGS_AMAZONS3TRACE=false      # Enable S3 debug logging (set to true for troubleshooting)

# NFS Storage Configuration (for deploy-nfs.sh)
NFS_STORAGE_SIZE=200Gi                   # Storage size for NFS PVC (e.g., 100Gi, 500Gi, 1Ti)
NFS_STORAGE_CLASS=azurefile-nfs-premium  # Azure Files Premium with NFS 4.1
NFS_PVC_NAME=mattermost-files            # Name of the PersistentVolumeClaim

# Mattermost License Configuration (REQUIRED)
# Path to your Mattermost license file
# This is REQUIRED - deployment will fail if not provided or file doesn't exist
LICENSE_FILE=./license.mattermost

# Notes:
# - Run 'make env' to create .env with secure 32-character passwords
# - Do NOT commit .env file to git (already in .gitignore)
# - Update DOMAIN with your actual domain name
# - Update EMAIL with your email for Let's Encrypt notifications
# - DNS_SERVER: DNS server for DNS verification checks (default: 8.8.8.8 Google DNS)
#   Alternatives: 1.1.1.1 (Cloudflare), 9.9.9.9 (Quad9), 208.67.222.222 (OpenDNS)
# - MM_SERVICEENVIRONMENT: Set to 'production', 'dev', or 'test' based on your license type
# - If using a test/dev license, set MM_SERVICEENVIRONMENT=test or MM_SERVICEENVIRONMENT=dev
